#Special
ZES_INTRO:!TARGET_IS_COMBAT_READY:"Hey! You think walking around like that is a good idea?":>ZES_INTRO_NEW
ZES_INTRO:TARGET_IS_COMBAT_READY:"Hey! Over here!":>ZES_INTRO_NEW
ZES_INTRO_NEW:@ALWAYS:"Who are you?":>ZES_INTRO_EXPLAIN_WHO
ZES_INTRO_NEW:@ALWAYS:"What...?":>ZES_INTRO_QUESTION
ZES_INTRO_QUESTION:@ALWAYS:"Are you unarmed? You really need a weapon out here.":>ZES_INTRO_EXPLAIN_WHO_2
ZES_INTRO_EXPLAIN_WHO:@ALWAYS:"Me? They just pay me to stand around and guard this place.":>ZES_INTRO_EXPLAIN_WHO_2
ZES_INTRO_EXPLAIN_WHO_2:@ALWAYS:"Where am I?":>ZES_INTRO_EXPLAIN
ZES_INTRO_EXPLAIN:@ALWAYS:"This is the ZES outpost. You know...":>ZES_INTRO_EXPLAIN_2
ZES_INTRO_EXPLAIN_2:@ALWAYS:"Oh yeah! I remember.":>ZES_INTRO_OFFER
ZES_INTRO_EXPLAIN_2:@ALWAYS:"ZES?":>ZES_INTRO_EXPLAIN_ZES
ZES_INTRO_EXPLAIN_ZES:@ALWAYS:"Wow! You really are new. This is the Zone Export Service outpost.":>ZES_INTRO_EXPLAIN_ZES_2
ZES_INTRO_EXPLAIN_ZES_2:@ALWAYS:"Like a trading post?":>ZES_INTRO_EXPLAIN_ZES_3
ZES_INTRO_EXPLAIN_ZES_3:@ALWAYS:"Yup. A lot of noobies like you end up here.":>ZES_INTRO_EXPLAIN_ZES_4
ZES_INTRO_EXPLAIN_ZES_4:@ALWAYS:"Interesting":>ZES_INTRO_OFFER
ZES_INTRO_OFFER:@ALWAYS:"You looking to do some work?":>ZES_INTRO_OFFER_2
ZES_INTRO_OFFER_2:@ALWAYS:"What kind of work?":>ZES_INTRO_OFFER_4
ZES_INTRO_OFFER_4:@ALWAYS:"Some bandit north of here is being quite the asshole to our scouts.":>ZES_INTRO_OFFER_5
ZES_INTRO_OFFER_5:@ALWAYS:"You want me to kill him?":>ZES_INTRO_OFFER_6
ZES_INTRO_OFFER_6:@ALWAYS:"You catch on quick!":>ZES_INTRO_OFFER_7
ZES_INTRO_OFFER_7:!@HAS_USABLE_WEAPON:"With what?":>ZES_INTRO_OFFER_8
ZES_INTRO_OFFER_7:@HAS_USABLE_WEAPON:"I can handle it.":>ZES_INTRO_OFFER_ACCEPT
ZES_INTRO_OFFER_7:@ALWAYS:"Why me?":>ZES_INTRO_OFFER_EXPLAIN
ZES_INTRO_OFFER_8:@ALWAYS:"I can give you this extra Glock I have.":>ZES_INTRO_OFFER_9
ZES_INTRO_OFFER_9:@ALWAYS:"Okay.":>ZES_INTRO_OFFER_ACCEPT
ZES_INTRO_OFFER_9:@ALWAYS:"Not really my type of work.":>END
ZES_INTRO_OFFER_ACCEPT:!TARGET_IS_COMBAT_READY:"Take this...":>END
ZES_INTRO_OFFER_ACCEPT:TARGET_IS_COMBAT_READY:"He should be just north of here somewhere...":>END


START_CONVERSATION:IS_INTIMIDATING:"Listen up!":>FORCE_CONVERSATION
START_CONVERSATION:!IS_INTIMIDATING,IS_NEUTRAL:"You got time to talk?":>WANTS_CONVERSATION
START_CONVERSATION:!IS_INTIMIDATING,!IS_NEUTRAL:"Hey.":>GREETING
ESTABLISH_RELATIONSHIP:@ALWAYS:$GET_INTRODUCTION_MESSAGE:>%*$GET_INTRODUCTION_GIST%

#Reactions
POTENTIAL_TRUST:@IS_PLAYER:"Got a moment?":>WANTS_CONVERSATION
POTENTIAL_TRUST:@ALWAYS:"Just passing through.":>END
POTENTIAL_TRUST:@ALWAYS,!@IS_PLAYER:"Just passing through. Got time to talk?":>WANTS_CONVERSATION
FEIGN_TRUST_FAILED:@ALWAYS:"(Lie) Sounds good.":>ESTABLISH_FEIGN_TRUST
HOSTILE_RESPONSE:@ALWAYS:"Are you sure about that?":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
HOSTILE_RESPONSE:@ALWAYS:"I'm out of here.":>END,ESTABLISH_SCARED

#Shifts
FEIGN_TRUST_TO_TRUST:@ALWAYS:"Thanks for the help.":>END,ESTABLISH_TRUST,&ESTABLISH_TRUST

ESTABLISH_TRUST:@IS_IN_GROUP:"Good to meet you.":ESTABLISH_TRUST,INFORM_OF_GROUP,>END
ESTABLISH_TRUST:!@IS_IN_GROUP:"Good to meet you.":ESTABLISH_TRUST,>END
ESTABLISH_FEIGN_TRUST:@IS_IN_GROUP:"Good to meet you.":ESTABLISH_FEIGN_TRUST,INFORM_OF_GROUP,>END
ESTABLISH_FEIGN_TRUST:!@IS_IN_GROUP:"Good to meet you.":ESTABLISH_FEIGN_TRUST,>END
ESTABLISH_AGRESSIVE:@ALWAYS:"Bad move!":ESTABLISH_AGRESSIVE,>END
ESTABLISH_HOSTILE:!@IS_IN_GROUP:"You messed with the wrong person!":ESTABLISH_HOSTILE,>END
ESTABLISH_HOSTILE:!@IS_IN_GROUP:"Okay.":>END
ESTABLISH_HOSTILE:@IS_IN_GROUP:"Messing with us was the last mistake you'll ever make!":>END,ESTABLISH_HOSTILE,DECLARE_GROUP_TARGET
ESTABLISH_SCARED:@ALWAYS:"Okay. I'm out of here too.":ESTABLISH_SCARED,>END
ADD_GROUP_TARGET:@ALWAYS:"Attack this target!":>REACT_TO_ADD_GROUP_TARGET
REACT_TO_ADD_GROUP_TARGET:@ALWAYS:"Copy!":>END,^CLAIM_HOSTILE

WANTS_CONVERSATION:@ALWAYS:"Sure!":>CONVERSATION
FORCE_CONVERSATION:@ALWAYS:"Okay...":>CONVERSATION
CONVERSATION:IS_INTIMIDATING,@IS_PLAYER:"(Intimidate) Demand info on target.":>ORDER_KILL,NEXT_GIST="GIVE_ORDER_TO_DESCRIBE_TARGET",TARGET=$GET_TARGET
CONVERSATION:IS_INTIMIDATING,@IS_PLAYER,TARGET_IS_COMBAT_READY:"(Intimidate) Disarm":>DEMAND_DROP_WEAPON
CONVERSATION:!@IS_PLAYER,IS_INTIMIDATING,@HAS_THREATS:"(Intimidate) Demand info on target.":>ORDER_KILL,NEXT_GIST="GIVE_ORDER_TO_DESCRIBE_TARGET",TARGET=$GET_TARGET
CONVERSATION:!@IS_PLAYER,!HAS_QUESTIONS_FOR_TARGET:>ASK_ABOUT_RECENT_EVENTS:>TALK_ABOUT_RECENT_EVENTS
CONVERSATION:!@IS_PLAYER,!HAS_QUESTIONS_FOR_TARGET,@IS_GROUP_LEADER,!IS_IN_SAME_GROUP:"Looking for a group?":>ANSWER_RECRUIT,GROUP_ID=@$GET_GROUP
CONVERSATION:!@IS_PLAYER,!HAS_QUESTIONS_FOR_TARGET:"Feel like trading?":>END
CONVERSATION:!@IS_PLAYER,!HAS_QUESTIONS_FOR_TARGET,HAS_ORDERS_FOR_TARGET,@IS_GROUP_LEADER,IS_IN_SAME_GROUP:"%*$GIVE_TARGET_ORDER_MESSAGE%":>%*$GIVE_TARGET_ORDER%
CONVERSATION:!@IS_PLAYER,HAS_QUESTIONS_FOR_TARGET:>%*$ASK_TARGET_QUESTION%:>END
CONVERSATION:!HAS_QUESTIONS_FOR_TARGET:"Nevermind.":>END
CONVERSATION:@IS_PLAYER,IS_IN_SAME_GROUP,@IS_GROUP_LEADER:"I have work for you.":>TALK_ABOUT_GROUP_ORDERS
CONVERSATION:@IS_PLAYER,!IS_IN_SAME_GROUP:>RECRUIT:>ANSWER_RECRUIT
CONVERSATION:@IS_PLAYER,!SEEN_TARGET_RECENTLY:"Where are you?":>GET_LOCATION
CONVERSATION:@IS_PLAYER:"I'm under attack!":>END,NEXT_GIST="ATTACKED_BY_HOSTILE",HOSTILE=$GET_TARGET
CONVERSATION:@IS_PLAYER:"Inform of group":>END,NEXT_GIST="INFORM_OF_KNOWN_GROUP",GROUP_ID=$GET_KNOWN_GROUP
INFORM_OF_KNOWN_GROUP:@ALWAYS:"Did you know about group %GROUP_ID%?":>HANDLE_INFORM_OF_KNOWN_GROUP
HANDLE_INFORM_OF_KNOWN_GROUP:!@^KNOWS_ABOUT_GROUP:"First I'm hearing of it.":>END,@^DISCOVER_GROUP
HANDLE_INFORM_OF_KNOWN_GROUP:@^KNOWS_ABOUT_GROUP,!^@IS_GROUP_HOSTILE:"I've heard of them.":>END
HANDLE_INFORM_OF_KNOWN_GROUP:@^KNOWS_ABOUT_GROUP,^@IS_GROUP_HOSTILE,^IS_TARGET_IN_GROUP:"Back off!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
HANDLE_INFORM_OF_KNOWN_GROUP:@^KNOWS_ABOUT_GROUP,^@IS_GROUP_HOSTILE,!^IS_TARGET_IN_GROUP:"We hate those guys!":>END

RECRUIT:@ALWAYS:"Are you looking for a group?":>ANSWER_RECRUIT
ANSWER_RECRUIT:!IS_COMBAT_TARGET,@IS_IN_GROUP,@WANTS_TO_LEAVE_GROUP_FOR_GROUP,!@IS_PLAYER:"Possibly. What's the plan?":>TALK_ABOUT_GROUP_MOTIVES
ANSWER_RECRUIT:!IS_COMBAT_TARGET,@IS_IN_GROUP,!@WANTS_TO_LEAVE_GROUP_FOR_GROUP,!@IS_PLAYER:"I'll pass.":>REJECT_RECRUIT
ANSWER_RECRUIT:!IS_COMBAT_TARGET,!@IS_IN_GROUP,!@IS_PLAYER:"Possibly. What's the plan?":>TALK_ABOUT_GROUP_MOTIVES
ANSWER_RECRUIT:IS_COMBAT_TARGET,!@IS_GROUP_LEADER,!@IS_PLAYER:"Wrong question!":>ESTABLISH_HOSTILE
ANSWER_RECRUIT:IS_COMBAT_TARGET,@IS_GROUP_LEADER,!@IS_PLAYER:"Do you even know who I am?":>ESTABLISH_HOSTILE
ANSWER_RECRUIT:@IS_PLAYER:"Possibly. What's the plan?":>TALK_ABOUT_GROUP_MOTIVES
ANSWER_RECRUIT:@IS_PLAYER,@IS_IN_GROUP:"I'm in a group.":>TARGET_IS_IN_GROUP,GROUP_ID=@$GET_GROUP,&@^DISCOVER_GROUP,&^ADD_TARGET_TO_KNOWN_GROUP
ANSWER_RECRUIT:@IS_PLAYER:"I'll pass.":>REJECT_RECRUIT
ANSWER_RECRUIT:@IS_PLAYER:"Wrong question!":>ESTABLISH_HOSTILE
REJECT_RECRUIT:@ALWAYS:"Your loss.":>END
TARGET_IS_IN_GROUP:IS_TARGET_GROUP_HOSTILE:"Back off then!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
TARGET_IS_IN_GROUP:IS_TARGET_GROUP_FRIENDLY:"Good to hear. We're on good terms with them.":>ESTABLISH_TRUST,ESTABLISH_TRUST
TARGET_IS_IN_GROUP:IS_TARGET_GROUP_NEUTRAL:"Interesting.":>END
LAST_SEEN_TARGET:@ALWAYS:"Where was the last place you saw <%TARGET_ID%>?":>UPDATE_LAST_SEEN_TARGET
UPDATE_LAST_SEEN_TARGET:!@IS_PLAYER,@^SAW_TARGET_RECENTLY:"I've updated your PDA.":>UPDATE_TARGET_LOCATION
UPDATE_LAST_SEEN_TARGET:!@IS_PLAYER,!@^SAW_TARGET_RECENTLY:"I haven't seen them recently.":>END
UPDATE_LAST_SEEN_TARGET:@IS_PLAYER:"I've updated your PDA.":>UPDATE_TARGET_LOCATION
UPDATE_LAST_SEEN_TARGET:@IS_PLAYER:"I haven't seen them recently.":>END
UPDATE_TARGET_LOCATION:@ALWAYS:"":>END,^UPDATE_LOCATION_OF_TARGET_FROM_TARGET

#Establish friendly/hostile
CONFRONT:@IS_CONFIDENT,@HAS_USABLE_WEAPON:"Tango spotted!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
CONFRONT:@IS_CONFIDENT,@HAS_USABLE_WEAPON,!TARGET_IS_COMBAT_READY:"Stop right there!":>INTIMIDATION
CONFRONT:!@IS_CONFIDENT,!TARGET_IS_COMBAT_READY:"Back away!":>DEMAND_DISTANCE
CONFRONT:@IS_CONFIDENT,@HAS_USABLE_WEAPON,TARGET_IS_COMBAT_READY:"Drop the weapon!":>DEMAND_DROP_WEAPON
CONFRONT:!@IS_CONFIDENT,@HAS_USABLE_WEAPON,TARGET_IS_COMBAT_READY:"Get out of here!":>ESTABLISH_HOSTILE

#Check to make sure we're discovered
CONFRONT:!@HAS_USABLE_WEAPON,TARGET_IS_COMBAT_READY:"I'm not armed.":>CONFRONT_UNARMED,ESTABLISH_SCARED
CONFRONT:!@HAS_USABLE_WEAPON,!TARGET_IS_COMBAT_READY:"Unarmed!":>CONFRONT_UNARMED,ESTABLISH_TRUST

CONFRONT_UNARMED:@IS_PLAYER:"I'm friendly.":>ESTABLISH_NON_THREAT,ESTABLISH_TRUST
CONFRONT_UNARMED:@IS_PLAYER:"Carry on.":>ESTABLISH_FEIGN_TRUST,ESTABLISH_FEIGN_TRUST
CONFRONT_UNARMED:@IS_PLAYER:"Get out of here!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
CONFRONT_UNARMED:!@IS_PLAYER,@IS_CONFIDENT,!@IS_PSYCHOTIC:"I'm friendly.":>ESTABLISH_TRUST,ESTABLISH_TRUST
CONFRONT_UNARMED:!@IS_PLAYER,!@IS_CONFIDENT:"Carry on.":>ESTABLISH_FEIGN_TRUST,ESTABLISH_FEIGN_TRUST
CONFRONT_UNARMED:!@IS_PLAYER,@IS_CONFIDENT,@IS_PSYCHOTIC:"Get out of here!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE

#CONFRONT:!@IS_RAIDING,@IS_CONFIDENT,@HAS_USABLE_WEAPON,TARGET_IS_COMBAT_READY:"Put down the weapon!":>DEMAND_DROP_WEAPON
#CONFRONT:!@IS_RAIDING,!@IS_CONFIDENT:"You're done for!":>INTIMIDATION
#CONFRONT:!@IS_RAIDING,!@IS_CONFIDENT,@HAS_USABLE_WEAPON:"Tango spotted!":>ESTABLISH_HOSTILE
#CONFRONT:!@IS_RAIDING,!@IS_CONFIDENT,!@HAS_USABLE_WEAPON:"Fuck!":>ESTABLISH_SCARED
#CONFRONT:!@HAS_USABLE_WEAPON,!@IS_PLAYER:"I'm out of here.":>END,ESTABLISH_SCARED
CONFRONT_ISSUE:@IS_IN_GROUP,!@IS_GROUP_MOTIVATED_FOR_CRIME:"Depends. Are you with anyone?":>ASK_FOR_RELATED_TARGETS
CONFRONT_ISSUE:@IS_IN_GROUP,@IS_GROUP_MOTIVATED_FOR_CRIME,@IS_IN_SHELTER:"You're the one violating our space.":>ASK_TO_LEAVE,GROUP_ID=@$GET_GROUP
CONFRONT_ISSUE:@IS_IN_GROUP,@IS_GROUP_MOTIVATED_FOR_CRIME,!@IS_IN_SHELTER:"We don't answer to anyone!":>GROUP_IS_HOSTILE,GROUP_ID=@$GET_GROUP,ESTABLISH_HOSTILE
CONFRONT_ISSUE:!@IS_IN_GROUP:"I'm just passing through.":>ACCEPT_INTIMIDATION
CONFRONT_ISSUE:!@IS_IN_GROUP:"Who are you exactly?":>END
ASK_FOR_RELATED_TARGETS:@IS_IN_GROUP,!@IS_GROUP_MOTIVATED_FOR_CRIME:"I'm with a group. We're not here for conflict.":>GROUP_IS_NOT_HOSTILE,GROUP_ID=@$GET_GROUP,FORCE_INFORM_OF_GROUP
GROUP_IS_NOT_HOSTILE:@ALWAYS:"Okay.":>ESTABLISH_TRUST,ESTABLISH_TRUST,@^DECLARE_GROUP_TRUSTED
ASK_TO_LEAVE:@IS_IN_GROUP,@IS_GROUP_MOTIVATED_FOR_CRIME:"And we don't care.":>GROUP_IS_HOSTILE,@^DECLARE_GROUP_HOSTILE
ASK_TO_LEAVE:@IS_IN_GROUP,!@IS_GROUP_MOTIVATED_FOR_CRIME:"Okay. We can.":>END
INTIMIDATION:!@HAS_USABLE_WEAPON,!@IS_PLAYER:"Okay. I'm out of here.":>ACCEPT_INTIMIDATION
INTIMIDATION:!@HAS_USABLE_WEAPON,!@IS_PLAYER:"I'm with you!":>QUESTION_INTIMIDATION
INTIMIDATION:@HAS_USABLE_WEAPON,!@IS_PLAYER:"Bad move!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
INTIMIDATION:@IS_PLAYER:"Okay. I'm out of here.":>ACCEPT_INTIMIDATION,ESTABLISH_SCARED
INTIMIDATION:@IS_PLAYER:"Bad move!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
ACCEPT_INTIMIDATION:@ALWAYS,!TARGET_IS_COMBAT_READY:"Okay.":>END,ESTABLISH_TRUST,&ESTABLISH_TRUST
ACCEPT_INTIMIDATION:@ALWAYS,TARGET_IS_COMBAT_READY:"I don't want to see you around here again.":>END
QUESTION_INTIMIDATION:TARGET_IS_COMBAT_READY:"Put down the gun!":>DEMAND_LOWER_WEAPON
QUESTION_INTIMIDATION:!TARGET_IS_COMBAT_READY:"Gotcha.":>END,ESTABLISH_TRUST

DEMAND_LOWER_WEAPON:@ALWAYS:"Okay.":>END
DEMAND_LOWER_WEAPON:@ALWAYS:"No thanks!":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
DEMAND_DROP_WEAPON:!@IS_PLAYER:"Okay.":>CLEAR_DROP_WEAPON,@DROP_WEAPON
DEMAND_DROP_WEAPON:@ALWAYS:"Okay.":>COMPLY_DROP_WEAPON
COMPLY_DROP_WEAPON:@ALWAYS:"":>END,DISARM
CLEAR_DROP_WEAPON:@ALWAYS:"Now get out!":>ESTABLISH_HOSTILE

DEMAND_DISTANCE:!@IS_PLAYER,@IS_CONFIDENT,@HAS_USABLE_WEAPON:"":>ESTABLISH_HOSTILE,ESTABLISH_HOSTILE
DEMAND_DISTANCE:!@IS_PLAYER,!@IS_CONFIDENT:"Okay.":>END

DEMAND_DISTANCE:@IS_PLAYER:"I'm friendly.":>ESTABLISH_NON_THREAT,ESTABLISH_FEIGN_TRUST
DEMAND_DISTANCE:@IS_PLAYER:>ESTABLISH_HOSTILE:>END
DEMAND_DISTANCE:@IS_PLAYER:>ESTABLISH_SCARED:>END

ESTABLISH_NON_THREAT:TARGET_IS_COMBAT_READY:"Can you lower the weapon first?":>DEMAND_LOWER_WEAPON
ESTABLISH_NON_THREAT:!TARGET_IS_COMBAT_READY:"Are you armed?":>ASK_IF_ARMED

ASK_IF_ARMED:@IS_PLAYER:"I have weapons.':>TARGET_IS_ARMED
ASK_IF_ARMED:@IS_PLAYER:"I'm unarmed.':>TARGET_IS_UNARMED

#TARGET_IS_ARMED:@IS_CONFIDENT:"I don't have much of a choice...":>END,ESTABLISH_FEIGN_TRUST
TARGET_IS_ARMED:@ALWAYS:"I don't have much of a choice...":>END,ESTABLISH_FEIGN_TRUST
TARGET_IS_UNARMED:!@IS_CONFIDENT:"Okay. If you say so.:>END,ESTABLISH_FEIGN_TRUST
TARGET_IS_UNARMED:@IS_CONFIDENT:"Okay. I trust you.:>END,ESTABLISH_TRUST

THREATEN:@ALWAYS:"Don't make this difficult for yourself!":>END
THREATEN:@ALWAYS:"Follow orders!":>END
TERRITORY_VIOLATION:@IS_GROUP_MOTIVATED_FOR_CRIME:"How about you get out of here?":>INTIMIDATION,ESTABLISH_HOSTILE
TERRITORY_VIOLATION:!@IS_GROUP_MOTIVATED_FOR_CRIME:"We've claimed this space. Can you move elsewhere?":>ASK_TO_RELOCATE,GROUP_ID=@$GET_GROUP,SHELTER=@$GET_GROUP_SHELTER
ASK_TO_RELOCATE:@IS_GROUP_MOTIVATED_FOR_CRIME:"No thanks!":>END,@^DISCOVER_GROUP,^ADD_TARGET_TO_KNOWN_GROUP,@^SET_GROUP_SHELTER,@^DECLARE_GROUP_HOSTILE
ASK_TO_RELOCATE:!@IS_GROUP_MOTIVATED_FOR_CRIME:"Okay.":>END,@^DISCOVER_GROUP,^ADD_TARGET_TO_KNOWN_GROUP,@^SET_GROUP_SHELTER,GROUP_ID=@$GET_GROUP,SHELTER=@$NEVER,@^SET_GROUP_SHELTER
ASK_TO_RELOCATE:@IS_PLAYER,@IS_IN_GROUP:"Okay. We'll leave.":>END,@^DISCOVER_GROUP,^ADD_TARGET_TO_KNOWN_GROUP,@^SET_GROUP_SHELTER,GROUP_ID=@$GET_GROUP,SHELTER=@$NEVER,@^SET_GROUP_SHELTER
ASK_TO_RELOCATE:@IS_PLAYER,!@IS_IN_GROUP:"Okay.":>END,@^DISCOVER_GROUP,^ADD_TARGET_TO_KNOWN_GROUP,@^SET_GROUP_SHELTER
ASK_TO_RELOCATE:@IS_PLAYER:"That doesn't work for me.":>ESTABLISH_HOSTILE,@^DISCOVER_GROUP,^ADD_TARGET_TO_KNOWN_GROUP,@^SET_GROUP_SHELTER,@^DECLARE_GROUP_HOSTILE

TALK_ABOUT_GROUP_MOTIVES:@ALWAYS:"There's strength in numbers.":>REACT_TO_GROUP_MOTIVES
TALK_ABOUT_GROUP_MOTIVES:@ALWAYS:"We can make lots of money together.":>REACT_TO_GROUP_MOTIVES
REACT_TO_GROUP_MOTIVES:@ALWAYS:"That sounds interesting. I'm in.":>ACCEPT_JOIN_GROUP,@^DISCOVER_GROUP,@^JOIN_GROUP
ACCEPT_JOIN_GROUP:@ALWAYS:"Welcome!":>END,ADD_GROUP_MEMBER,CLAIM_TO_BE_GROUP_LEADER,^INFORM_OF_GROUP_MEMBERS
GROUP_EXISTS:@ALWAYS:"I'm a member of <group>":>DISCOVER_GROUP,GROUP_ID=@$GET_GROUP
DISCOVER_GROUP:^@KNOWS_ABOUT_GROUP:"I knew that!":>END
DISCOVER_GROUP:!^@KNOWS_ABOUT_GROUP:"I didn't know that!":>END,@^DISCOVER_GROUP,^ADD_TARGET_TO_KNOWN_GROUP
GROUP_LIST:@ALWAYS:"<Updated member list of group %GROUP_ID%>":>END,&^UPDATE_GROUP_MEMBERS
ASK_FOR_GROUP_LIST:@ALWAYS:"Do you know anybody in group %GROUP_ID%?:>INFORM_OF_GROUP_MEMBERS
INFORM_OF_GROUP_MEMBERS:@^KNOWS_ABOUT_GROUP:"Yeah...":>END,^INFORM_OF_GROUP_MEMBERS
INFORM_OF_GROUP_MEMBERS:!@^KNOWS_ABOUT_GROUP:"Never heard of them.":>END
GROUP_IS_HOSTILE:@ALWAYS:"Group %GROUP_ID% has crossed the line!":>CLAIM_GROUP_IS_HOSTILE
CLAIM_GROUP_IS_HOSTILE:@ALWAYS:"Copy!":>END,@^DISCOVER_GROUP,^@DECLARE_GROUP_HOSTILE
CLAIM_GROUP_IS_HOSTILE:@ALWAYS:"Loud and clear.":>END,@^DISCOVER_GROUP,^@DECLARE_GROUP_HOSTILE

GROUP_LEADER_STATE_CHANGE:@ALWAYS:"":>END,&@RESET_THINK_TIMER

#NEW_GROUP_MEMBER:@ALWAYS:"We have a new guy in our ranks."

GREETING:IS_IN_SAME_GROUP:"What's up?":>CONVERSATION
GREETING:IS_IN_SAME_GROUP,IS_TARGET_GROUP_LEADER:"Orders?":>CONVERSATION
GREETING:@ALWAYS:"Hello.":>CONVERSATION
GREETING:@ALWAYS:"Hi.":>CONVERSATION

GREETING_RESPONSE:@ALWAYS:>@GREETING:>END
ASK_ABOUT_RECENT_EVENTS:@ALWAYS:"Anything new?":>TALK_ABOUT_RECENT_EVENTS
ASK_ABOUT_RECENT_EVENTS:@ALWAYS:"What have you been up to recently?":>TALK_ABOUT_RECENT_EVENTS
TALK_ABOUT_RECENT_EVENTS:@ALWAYS:$@GET_RECENT_EVENTS:>END

TALK_ABOUT_GROUP_ORDERS:@HAS_NEEDS_TO_MEET:"I'm busy right now.":>HANDLE_REJECTION,REJECT=TALK_ABOUT_GROUP_ORDERS
TALK_ABOUT_GROUP_ORDERS:!@HAS_NEEDS_TO_MEET:"Yes?":>ORDERS

HANDLE_REJECTION:@ALWAYS:"Maybe you should reconsider that.":>RECONSIDER

ORDERS:@ALWAYS:"Kill...":>ORDER_KILL,NEXT_GIST="GIVE_ORDER_TO_KILL_TARGET",TARGET=GET_TARGET
GIVE_ORDER_TO_KILL_TARGET:@ALWAYS:"I need this person eliminated.":>REACT_TO_KILL_TARGET_ORDER
GIVE_ORDER_TO_DESCRIBE_TARGET:@ALWAYS:"Tell me more about...":>DESCRIBE_TARGET
REACT_TO_KILL_TARGET_ORDER:@ALWAYS:"I can do that.":>END
DESCRIBE_TARGET:@ALWAYS:"%*^$DESCRIBE_TARGET%":>END
COMBAT_READY:@ALWAYS:"Are you combat ready?":>IS_COMBAT_READY
IS_COMBAT_READY:@IS_PLAYER:"Yes.":>CONFIRM_COMBAT_READY
IS_COMBAT_READY:@IS_PLAYER:"No.":>REJECT_COMBAT_READY
IS_COMBAT_READY:@HAS_USABLE_WEAPON,!@IS_PLAYER:"Yes.":>CONFIRM_COMBAT_READY
IS_COMBAT_READY:!@HAS_USABLE_WEAPON,!@IS_PLAYER:"No.":>REJECT_COMBAT_READY
CONFIRM_COMBAT_READY:@ALWAYS:"":>END,MARK_TARGET_AS_COMBAT_READY
REJECT_COMBAT_READY:@ALWAYS:"":>END,MARK_TARGET_AS_NOT_COMBAT_READY

RECONSIDER:@ALWAYS:>%REJECT%:>RECONSIDERED

GIVE_ORDER:@ALWAYS:"%*$GIVE_TARGET_ORDER_MESSAGE%":>%*$GIVE_TARGET_ORDER%
JOB:@ALWAYS:"I can do it.":>JOB_ACCEPT
JOB:@ALWAYS:"No thanks.":>JOB_DENY

JOB_ACCEPT:@ALWAYS:"Awesome.":TAKE_ORDER,>END
JOB_DENY:@ALWAYS:"Too bad.":REJECT_ORDER,>END

CALL_ACCEPTED:@ALWAYS:"What can I help you with?":>CONVERSATION

GET_LOCATION:@ALWAYS:"I am near %*@$GET_LOCATION%.":>END,UPDATE_LOCATION

ATTACKED_BY_HOSTILE:@ALWAYS:"I'm under attack.":>RESPOND_TO_ATTACK_BY_HOSTILE
RESPOND_TO_ATTACK_BY_HOSTILE:@ALWAYS:"I'm coming!":^CLAIM_HOSTILE,>END

#Groups
#UPDATE_GROUP_LEADER:@IS_LEADER_OF_GROUP:"
UPDATE_GROUP_SHELTER:@ALWAYS:"This is where we'll be meeting.":>SET_GROUP_SHELTER,GROUP_ID=$@GET_GROUP,SHELTER=$@GET_GROUP_SHELTER
SET_GROUP_SHELTER:@ALWAYS:"Understood.":>END,^@SET_GROUP_SHELTER
UPDATE_GROUP_STAGE:@ALWAYS:$@GET_GROUP_STAGE_MESSAGE:>SET_GROUP_STAGE,GROUP_ID=$@GET_GROUP,STAGE=$@GET_GROUP_STAGE
SET_GROUP_STAGE:@ALWAYS:"Understood.":>END,^@SET_GROUP_STAGE
RESOURCE_CHECK:@ALWAYS:"Do you need any supplies?":>NEEDS_SUPPLIES
NEEDS_SUPPLIES:!@IS_PLAYER,@HAS_UNMET_NEEDS:"I could use some things...":>END
NEEDS_SUPPLIES:!@IS_PLAYER,!@HAS_UNMET_NEEDS:"I should be okay for now.":>END
NEEDS_SUPPLIES:@IS_PLAYER:"I could use...":>END,NEXT_GIST="ASK_FOR_SUPPLIES",ITEMS=$GET_NEEDS
NEEDS_SUPPLIES:@IS_PLAYER:"I'm fine for now.":>END
ASK_FOR_SUPPLIES:@ALWAYS:"I need...":>RESPOND_TO_ASK_FOR_SUPPLIES
RESPOND_TO_ASK_FOR_SUPPLIES:@^KNOWS_ITEMS_MATCHING:^INFORM_OF_ITEMS:>END
RESPOND_TO_ASK_FOR_SUPPLIES:!@^KNOWS_ITEMS_MATCHING:"Can't help you there.":>END

#Orders
ORDER_MOVE_TO_CHUNK:@ALWAYS:"Move to that treeline.":>ACCEPT_ORDER_MOVE_TO_CHUNK
ORDER_WAIT_PARTNER:@ALWAYS:"I'm falling back to your position.":>END
ORDER_WAIT_SMALL:@ALWAYS:"I'm falling back to your position.":>END
ORDER_WAIT_LARGE:@ALWAYS:"I'm falling back to your position.":>END
ACCEPT_ORDER_MOVE_TO_CHUNK:@ALWAYS:"...":>END,@^MOVE_TO_CHUNK
ORDER_EQUIP_WEAPON:@IS_CONFIDENT:"Are you armed?":>ACCEPT_EQUIP_WEAPON
ORDER_EQUIP_WEAPON:!@IS_CONFIDENT:"Arm yourself ASAP!":>ACCEPT_EQUIP_WEAPON
ACCEPT_EQUIP_WEAPON:!@IS_PLAYER,&@IS_CONFIDENT,@HAS_USABLE_WEAPON:"Yessir!":>END
ACCEPT_EQUIP_WEAPON:!@IS_PLAYER,&@IS_CONFIDENT,!@HAS_USABLE_WEAPON:"Negative.":>END
ACCEPT_EQUIP_WEAPON:!@IS_PLAYER,!&@IS_CONFIDENT,@HAS_USABLE_WEAPON:"Aye aye!":>END
ACCEPT_EQUIP_WEAPON:!@IS_PLAYER,!&@IS_CONFIDENT,!@HAS_USABLE_WEAPON:"I'm unarmed!":>END
ACCEPT_EQUIP_WEAPON:@IS_PLAYER,&@IS_CONFIDENT:"Yessir!":>END
ACCEPT_EQUIP_WEAPON:@IS_PLAYER,&@IS_CONFIDENT:"Negative.":>END
ACCEPT_EQUIP_WEAPON:@IS_PLAYER,!&@IS_CONFIDENT:"Aye aye!":>END
ACCEPT_EQUIP_WEAPON:@IS_PLAYER,!&@IS_CONFIDENT:"I'm unarmed!":>END
ORDER_STATUS_REPORT_PARTNER:@ALWAYS:"Where are you?":>ACCEPT_STATUS_REPORT_PARTNER
ORDER_STATUS_REPORT_SMALL:@ALWAYS:"We lost sight of you.":>ACCEPT_STATUS_REPORT_PARTNER
ORDER_STATUS_REPORT_LARGE:@ALWAYS:"We lost sight of you.":>ACCEPT_STATUS_REPORT_PARTNER
ACCEPT_STATUS_REPORT_PARTNER:@IS_PLAYER:"I lost contact with you.":>END,&UPDATE_LOCATION
ACCEPT_STATUS_REPORT_PARTNER:@IS_PLAYER:"I'm pinned down.":>END,&UPDATE_LOCATION
ACCEPT_STATUS_REPORT_PARTNER:!@IS_PLAYER,@HAS_THREATS:"I'm pinned down!":>END,&UPDATE_LOCATION
ACCEPT_STATUS_REPORT_PARTNER:!@IS_PLAYER,!@HAS_THREATS:"I lost contact with you.":>END,&UPDATE_LOCATION
ACCEPT_STATUS_REPORT_SMALL:@IS_PLAYER:"I lost contact with the squad.":>END
ACCEPT_STATUS_REPORT_SMALL:!@IS_PLAYER,@HAS_THREATS:"I'm pinned down!":>END,&UPDATE_LOCATION
ACCEPT_STATUS_REPORT_SMALL:!@IS_PLAYER,!@HAS_THREATS:"I lost contact with you.":>END,&UPDATE_LOCATION
ACCEPT_STATUS_REPORT_LARGE:@IS_PLAYER:"I lost contact with the squad.":>END
ACCEPT_STATUS_REPORT_LARGE:!@IS_PLAYER,@HAS_THREATS:"I'm pinned down!":>END,&UPDATE_LOCATION
ACCEPT_STATUS_REPORT_LARGE:!@IS_PLAYER,!@HAS_THREATS:"I lost contact with you.":>END,&UPDATE_LOCATION
ORDER_HEALTH_REPORT_PARTNER:@ALWAYS:"Are you wounded?":>ACCEPT_HEALTH_REPORT_PARTNER
ACCEPT_HEALTH_REPORT_PARTNER:@IS_INJURED:"I'm wounded.":>END
ACCEPT_HEALTH_REPORT_PARTNER:!@IS_INJURED:"I'm OK.":>END

#Group phrases/shouts
RAID_LOCATION:@ALWAYS:"We're moving out!":>ACCEPT_RAID_LOCATION
ACCEPT_RAID_LOCATION:@ALWAYS:"Loud and clear!":>END,^@SET_RAID_LOCATION
FOUND_SHELTER:@ALWAYS:"I've found us a place to stay.":>END
PREPARE_FOR_RAID:@ALWAYS:"We might be heading out soon.":>END
HURT:@HAS_THREATS:"I'm hit!":>END
HURT:!@HAS_THREATS:"I'm bleeding...":>END
HURT:@ALWAYS:"Medic!":>END
GROUP_PREPARE_FOR_COMBAT_LARGE:@IS_CONFIDENT:"Assume combat positions!":>END
GROUP_PREPARE_FOR_COMBAT_LARGE:!@IS_CONFIDENT:"Prepare to engage!":>END
GROUP_PREPARE_FOR_COMBAT_SMALL:@IS_CONFIDENT:"Be on the lookout!":>END
GROUP_PREPARE_FOR_COMBAT_SMALL:!@IS_CONFIDENT:"Damnit! Gear up!":>END
GROUP_PREPARE_FOR_COMBAT_PARTNER:@IS_CONFIDENT:"We've got this.":>END
GROUP_PREPARE_FOR_COMBAT_PARTNER:!@IS_CONFIDENT:"Fuck! We got company...":>END

#Schemes
INCOMING_TARGETS:!@HAS_THREATS:"You're awake! You should get out of here.":>INCOMING_TARGETS_2
INCOMING_TARGETS:@HAS_THREATS:"Wake up! The bandits are close!.":>INCOMING_TARGETS_2
INCOMING_TARGETS_2:@ALWAYS:"Who are you?":>INCOMING_TARGETS_3_WHO
INCOMING_TARGETS_2:@ALWAYS:"What's going on?":>INCOMING_TARGETS_3_WHAT
INCOMING_TARGETS_2:@ALWAYS:"Where am I?":>INCOMING_TARGETS_3_WHERE
INCOMING_TARGETS_2:@ALWAYS:"Where should I go?":>END
INCOMING_TARGETS_3_WHO:@ALWAYS:"I'm %*@$NAME%. I'm on a scouting run.":>INCOMING_TARGETS_2
INCOMING_TARGETS_3_WHAT:@ALWAYS:"You don't? I heard gunshots and ran this way...":>INCOMING_TARGETS_2
INCOMING_TARGETS_3_WHERE:@ALWAYS:"I'm not familiar with this area.":>INCOMING_TARGETS_2

INCOMING_TARGETS_FOLLOW:!@HAS_THREATS:"Follow me out of here. I can take you to camp.":>INCOMING_TARGETS_FOLLOW_ACCEPT,RECRUITING,GROUP_ID=$@GET_GROUP
INCOMING_TARGETS_FOLLOW:@HAS_THREATS:"We're outnumbered. We need to shoot our way out.":>INCOMING_TARGETS_FOLLOW_ACCEPT_COMBAT,RECRUITING,GROUP_ID=$@GET_GROUP
INCOMING_TARGETS_FOLLOW_ACCEPT:@ALWAYS:"I'll follow you.":>END,@^DISCOVER_GROUP,@^JOIN_GROUP,ADD_GROUP_MEMBER,&ADD_GROUP_MEMBER,CLAIM_TO_BE_GROUP_LEADER,&^INFORM_OF_GROUP_MEMBERS
INCOMING_TARGETS_FOLLOW_ACCEPT:@ALWAYS:"I think I'm better off alone.":>END
INCOMING_TARGETS_FOLLOW_ACCEPT_COMBAT:@ALWAYS:"I'll follow you.":>END,@^DISCOVER_GROUP,@^JOIN_GROUP,ADD_GROUP_MEMBER,&ADD_GROUP_MEMBER
INCOMING_TARGETS_FOLLOW_ACCEPT_COMBAT:@ALWAYS:"We can talk it out.":>END