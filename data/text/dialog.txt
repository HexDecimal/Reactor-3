START_CONVERSATION:@ALWAYS:"You got time to talk?":>WANTS_CONVERSATION
ESTABLISH_RELATIONSHIP:@ALWAYS:$GET_INTRODUCTION_MESSAGE:>%*$GET_INTRODUCTION_GIST%

#Reactions
TRUST:@ALWAYS:"Cool!":>ESTABLISH_TRUST
FEIGN_TRUST_FAILED:@ALWAYS:"(Lie) Okay, sounds good.":>ESTABLISH_FEIGN_TRUST
AGGRESSIVE_RESPONSE:@ALWAYS:"Are you sure about that?":>STOOD_UP_TO,ESTABLISH_AGRESSIVE
AGGRESSIVE_RESPONSE:@ALWAYS:"Okay, okay!":>END,ESTABLISH_SCARED

ESTABLISH_TRUST:@ALWAYS:"Good to meet you.":ESTABLISH_TRUST,>END
ESTABLISH_FEIGN_TRUST:@ALWAYS:"Good to meet you.":ESTABLISH_FEIGN_TRUST,>END
ESTABLISH_AGRESSIVE:@ALWAYS:"Bad move!":ESTABLISH_AGRESSIVE,>END
ESTABLISH_HOSTILE:@ALWAYS:"You messed with the wrong person!":ESTABLISH_HOSTILE,>END
ESTABLISH_SCARED:@ALWAYS:"Okay, I'm out of here!":ESTABLISH_SCARED,>END

WANTS_CONVERSATION:@ALWAYS:"Sure!":>CONVERSATION
CONVERSATION:!HAS_QUESTIONS_FOR_TARGET:>ASK_ABOUT_RECENT_EVENTS:>TALK_ABOUT_RECENT_EVENTS
CONVERSATION:!HAS_QUESTIONS_FOR_TARGET,@IS_GROUP_LEADER,!IS_IN_SAME_GROUP:"Looking for a group?":>ANSWER_RECRUIT,GROUP_ID=@GET_GROUP
CONVERSATION:!HAS_QUESTIONS_FOR_TARGET:"Feel like trading?":>END
CONVERSATION:!HAS_QUESTIONS_FOR_TARGET,HAS_ORDERS_FOR_TARGET,@IS_GROUP_LEADER,IS_IN_SAME_GROUP:"%*$GIVE_TARGET_ORDER_MESSAGE%":>%*$GIVE_TARGET_ORDER%
CONVERSATION:HAS_QUESTIONS_FOR_TARGET:>%*$ASK_TARGET_QUESTION%:>END
CONVERSATION:!HAS_QUESTIONS_FOR_TARGET:"Nevermind.":>END
CONVERSATION:@IS_PLAYER:"I have work for you.":>TALK_ABOUT_GROUP_ORDERS
CONVERSATION:@IS_PLAYER,!SEEN_TARGET_RECENTLY:"Where are you?":>GET_LOCATION

RECRUIT:@ALWAYS:"Are you looking for a group?":>ANSWER_RECRUIT
ANSWER_RECRUIT:!IS_COMBAT_TARGET:"Possibly. What's the plan?":>TALK_ABOUT_GROUP_MOTIVES

GREETING:IS_IN_SAME_GROUP:"Hey, what's up?":>GREETING_RESPONSE
GREETING:IS_IN_SAME_GROUP,@IS_TARGET_GROUP_LEADER:Orders?:>GET_ORDERS
GREETING:@ALWAYS:"Hello.":>GREETING_RESPONSE
GREETING:@ALWAYS:"Hi.":>GREETING_RESPONSE

GREETING_RESPONSE:@ALWAYS:>@GREETING:>END
ASK_ABOUT_RECENT_EVENTS:@ALWAYS:"Anything new?":>TALK_ABOUT_RECENT_EVENTS
ASK_ABOUT_RECENT_EVENTS:@ALWAYS:"What have you been up to recently?":>TALK_ABOUT_RECENT_EVENTS
TALK_ABOUT_RECENT_EVENTS:@ALWAYS:$@GET_RECENT_EVENTS:>END

TALK_ABOUT_GROUP_MOTIVES:@ALWAYS:"There's strength in numbers.":>REACT_TO_GROUP_MOTIVES
TALK_ABOUT_GROUP_MOTIVES:@ALWAYS:"We can make lots of money together.":>REACT_TO_GROUP_MOTIVES
REACT_TO_GROUP_MOTIVES:@ALWAYS:"That sounds interesting. I'm in.":>CONVERSATION,JOIN_GROUP

TALK_ABOUT_GROUP_ORDERS:@HAS_NEEDS_TO_MEET:"I'm busy right now.":>HANDLE_REJECTION,REJECT=TALK_ABOUT_GROUP_ORDERS
TALK_ABOUT_GROUP_ORDERS:!@HAS_NEEDS_TO_MEET:"Yes?":>ORDERS

HANDLE_REJECTION:@ALWAYS:"Maybe you should reconsider that.":>RECONSIDER

ORDERS:@ALWAYS:"Kill...":>ORDER_KILL,NEXT_GIST="GIVE_ORDER_TO_KILL_TARGET",TARGET=GET_TARGET
GIVE_ORDER_TO_KILL_TARGET:@ALWAYS:"I need this person eliminated.":>REACT_TO_KILL_TARGET_ORDER
REACT_TO_KILL_TARGET_ORDER:@ALWAYS:"I can do that.":>END

RECONSIDER:@ALWAYS:>%REJECT%:>RECONSIDERED

GIVE_ORDER:HAS_ORDERS_FOR_TARGET:"%*$GIVE_TARGET_ORDER_MESSAGE%":>%*$GIVE_TARGET_ORDER%
JOB:@ALWAYS:"I can do it.":>JOB_ACCEPT
JOB:@ALWAYS:"No thanks.":>JOB_DENY

JOB_ACCEPT:@ALWAYS:"Awesome.":TAKE_ORDER,>END
JOB_DENY:@ALWAYS:"Too bad.":REJECT_ORDER,>END

CALL_ACCEPTED:@ALWAYS:"What can I help you with?":>CONVERSATION

GET_LOCATION:@ALWAYS:"I am near %*@$GET_LOCATION%.":>END,UPDATE_LOCATION

ATTACKED_BY_HOSTILE:@ALWAYS:"Help! This maniac is attacking me!":>RESPOND_TO_ATTACK_BY_HOSTILE
RESPOND_TO_ATTACK_BY_HOSTILE:@ALWAYS:"I'm coming!":^CLAIM_HOSTILE,>END